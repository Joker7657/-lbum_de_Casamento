<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Galeria ğŸ’</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script src="supabase.js"></script>
</head>

<body class="bg-white">

<div class="text-center p-6">
<h1 class="text-3xl text-rose-700">Galeria dos Noivos ğŸ’•</h1>
<p>Protegido por senha</p>
</div>

<div id="lock" class="text-center mt-6">
<input id="pass" type="password" class="border p-2 rounded">
<button onclick="unlock()" class="bg-rose-600 text-white px-4 py-2 rounded">
Entrar
</button>
</div>

<div id="gallery" class="grid grid-cols-2 md:grid-cols-4 gap-2 p-4 hidden"></div>

<script>
const PASSWORD = "noivosfelizes";

function unlock(){
 if(document.getElementById("pass").value !== PASSWORD)
   return alert("Senha errada");
 document.getElementById("lock").style.display = "none";
 document.getElementById("gallery").classList.remove("hidden");
 loadPhotos();
}

async function loadPhotos(){
 let { data } = await supabase.from("photos").select("*").order("created_at",{ascending:false});
 const div = document.getElementById("gallery");
 div.innerHTML = "";
 data.forEach(p=>{
   const img = document.createElement("img");
   img.src = p.url;
   img.className = "rounded shadow";
   div.appendChild(img);
 });
}
</script>

</body>
</html>
